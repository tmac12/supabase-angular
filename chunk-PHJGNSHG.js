import{a as P}from"./chunk-CSE7IBR5.js";import{a as q,b as p,c as A,d as G,e as h,g as Q,h as j,i as M,m as R,o as B}from"./chunk-7MUWGR5F.js";import{l as V,o as k,p as u,q as I}from"./chunk-JENCE4PA.js";import{Gb as D,Ja as b,La as f,Oa as y,P as C,Sa as t,Ta as o,Ua as m,Ya as T,Za as w,bb as x,cb as _,db as E,fa as d,gb as r,ib as N,nb as F,ta as s,ua as g}from"./chunk-3AODQQRU.js";import"./chunk-JENGY3ED.js";import{a as v,b as S}from"./chunk-PYQTE2ZK.js";var J=["name"];function K(l,n){if(l&1&&(t(0,"div"),r(1),o()),l&2){let U=w();s(),N("",U.shiftName()," wonderful name!")}}var se=(()=>{let n=class n{constructor(a){this.fb=a,this.supabase=d(D),this.shiftService=d(I),this.accountService=d(k),this.currentShift=this.shiftService.currentShift(),this.router=d(V),this.nameControl=new h("",p.required),this.startTimeControl=new h("00:00:00",p.required),this.endTimeControl=new h("00:00:00",p.required),this.shiftName=u(this.nameControl.valueChanges,{initialValue:""}),this.startTime=u(this.startTimeControl.valueChanges,{initialValue:"00:00:00"}),this.endTime=u(this.endTimeControl.valueChanges,{initialValue:"00:00:00"}),this.shiftForm=this.fb.group({name:[""]})}ngAfterViewInit(){}saveShift(){let a=this.shiftName();if(!a){console.log("no shift name");return}let i=this.startTime();if(!i){console.log("no start time");return}let e=this.endTime();if(!e){console.log("no end time");return}let c=this.shiftService.currentShift(),W=this.accountService.userId(),z=S(v({},c),{name:a,created_at:new Date().toUTCString(),start_time:i,end_time:e,owner_id:W});this.supabase.updateShift(z).then(H=>{console.log("shift updated"),console.log(H),this.router.navigate(["home"])})}};n.\u0275fac=function(i){return new(i||n)(g(R))},n.\u0275cmp=C({type:n,selectors:[["app-shift-editor"]],viewQuery:function(i,e){if(i&1&&x(J,5),i&2){let c;_(c=E())&&(e.nameInput=c.first)}},standalone:!0,features:[F],decls:27,vars:5,consts:[[1,"card","lg:card-side","bg-base-100","shadow-xl"],["src","https://images.pexels.com/photos/636237/pexels-photo-636237.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2","alt","Album"],[1,"card-body"],[1,"card-title"],[1,"badge","badge-secondary"],[1,"card-body",3,"formGroup"],[1,"input","input-bordered","flex","items-center","gap-2"],["type","text","placeholder","",1,"grow",3,"formControl"],["name",""],["type","time","placeholder","",1,"grow",3,"formControl"],[1,"form-control","mt-6"],[1,"btn","btn-primary",3,"click"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"figure"),m(2,"img",1),o(),t(3,"div",2)(4,"h2",3),r(5," Configure your "),t(6,"div",4),r(7,"NEW"),o(),r(8," shift "),o(),t(9,"form",5),b(10,K,2,1,"div"),t(11,"label",6),r(12," Name "),m(13,"input",7,8),o(),t(15,"label",6),r(16," Start time "),m(17,"input",9),o(),t(18,"label",6),r(19," End time "),m(20,"input",9),o(),t(21,"label",6),r(22," Color "),m(23,"app-color-picker"),o(),t(24,"div",10)(25,"button",11),T("click",function(){return e.saveShift()}),r(26,"Save"),o()()()()()),i&2&&(s(9),f("formGroup",e.shiftForm),s(),y(10,e.shiftName()?10:-1),s(3),f("formControl",e.nameControl),s(4),f("formControl",e.startTimeControl),s(3),f("formControl",e.endTimeControl))},dependencies:[B,Q,q,A,G,j,M,P]});let l=n;return l})();export{se as default};
