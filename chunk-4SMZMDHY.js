import{a as H}from"./chunk-TTIIIVW5.js";import{a as u,b as Q}from"./chunk-7DUQIZLP.js";import{a as j,b as p,c as M,d as R,e as h,g as B,h as P,i as U,m as W,o as z}from"./chunk-BUM5AQCU.js";import{l as q,o as G}from"./chunk-2YWUQ3JB.js";import{Aa as s,Ba as w,Pa as T,Ra as f,Rb as A,Ua as _,V as d,Y as g,Ya as t,Za as o,_a as c,cb as x,fb as E,ga as b,gb as N,ha as y,kb as V,lb as F,mb as D,pb as r,rb as k,wb as I}from"./chunk-46NUIZ3Q.js";import"./chunk-JENGY3ED.js";import{a as S,b as C}from"./chunk-PYQTE2ZK.js";var O=["name"];function X(l,n){if(l&1&&(t(0,"div"),r(1),o()),l&2){let J=N();s(),k("",J.shiftName()," wonderful name!")}}var ce=(()=>{let n=class n{constructor(a){this.fb=a,this.supabase=d(A),this.shiftService=d(Q),this.accountService=d(G),this.currentShift=this.shiftService.currentShift(),this.router=d(q),this.nameControl=new h("",p.required),this.startTimeControl=new h("00:00:00",p.required),this.endTimeControl=new h("00:00:00",p.required),this.shiftName=u(this.nameControl.valueChanges,{initialValue:""}),this.startTime=u(this.startTimeControl.valueChanges,{initialValue:"00:00:00"}),this.endTime=u(this.endTimeControl.valueChanges,{initialValue:"00:00:00"}),this.shiftForm=this.fb.group({name:[""]})}ngAfterViewInit(){}saveShift(){let a=this.shiftName();if(!a){console.log("no shift name");return}let i=this.startTime();if(!i){console.log("no start time");return}let e=this.endTime();if(!e){console.log("no end time");return}let m=this.shiftService.currentShift(),v=this.accountService.userId(),K=C(S({},m),{name:a,created_at:new Date().toUTCString(),start_time:i,end_time:e,owner_id:v});this.supabase.updateShift(K).then(L=>{console.log("shift updated"),console.log(L),this.router.navigate(["home"])})}};n.\u0275fac=function(i){return new(i||n)(w(W))},n.\u0275cmp=g({type:n,selectors:[["app-shift-editor"]],viewQuery:function(i,e){if(i&1&&V(O,5),i&2){let m;F(m=D())&&(e.nameInput=m.first)}},standalone:!0,features:[I],decls:27,vars:5,consts:[["name",""],[1,"card","lg:card-side","bg-base-100","shadow-xl"],["src","https://images.pexels.com/photos/636237/pexels-photo-636237.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2","alt","Album"],[1,"card-body"],[1,"card-title"],[1,"badge","badge-secondary"],[1,"card-body",3,"formGroup"],[1,"input","input-bordered","flex","items-center","gap-2"],["type","text","placeholder","",1,"grow",3,"formControl"],["type","time","placeholder","",1,"grow",3,"formControl"],[1,"form-control","mt-6"],[1,"btn","btn-primary",3,"click"]],template:function(i,e){if(i&1){let m=x();t(0,"div",1)(1,"figure"),c(2,"img",2),o(),t(3,"div",3)(4,"h2",4),r(5," Configure your "),t(6,"div",5),r(7,"NEW"),o(),r(8," shift "),o(),t(9,"form",6),T(10,X,2,1,"div"),t(11,"label",7),r(12," Name "),c(13,"input",8,0),o(),t(15,"label",7),r(16," Start time "),c(17,"input",9),o(),t(18,"label",7),r(19," End time "),c(20,"input",9),o(),t(21,"label",7),r(22," Color "),c(23,"app-color-picker"),o(),t(24,"div",10)(25,"button",11),E("click",function(){return b(m),y(e.saveShift())}),r(26,"Save"),o()()()()()}i&2&&(s(9),f("formGroup",e.shiftForm),s(),_(10,e.shiftName()?10:-1),s(3),f("formControl",e.nameControl),s(4),f("formControl",e.startTimeControl),s(3),f("formControl",e.endTimeControl))},dependencies:[z,B,j,M,R,P,U,H]});let l=n;return l})();export{ce as default};
