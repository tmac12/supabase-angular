import{P as o,Rb as u,V as d,i}from"./chunk-46NUIZ3Q.js";import{d as t}from"./chunk-PYQTE2ZK.js";var F=(()=>{let r=class r{constructor(){this.supabase=d(u),this.friendRequests=this.supabase.friendRequests}acceptFriendShip(e){return i(this.supabase.updateFriendShipStatus(e,"accepted"))}declineFriendShip(e){return i(this.supabase.updateFriendShipStatus(e,"declined"))}addFriend(e){return console.log("add friend"),i(this.supabase.updateFriend(e))}addFriendPromise(e){return t(this,null,function*(){return console.log("add friend"),yield this.supabase.updateFriend(e)})}getAllFriends(){return i(this.supabase.getAllFriends())}getAllOwnerFriends(){return i(this.supabase.getAllOwnerFriends())}getFriends(){return i(this.supabase.getFriends())}getFriendPromise(){return t(this,null,function*(){let{data:e,error:s}=yield this.supabase.getFriends();return s&&console.error(s),e})}addFriendByEmail(e){return t(this,null,function*(){if(yield this.supabase.userExistByEmail(e)){console.log("User exists");let n=yield this.supabase.addFriendByEmail(e);if(n.error)return console.error(n.error.message),!1;console.log("Friend added")}else{console.log("User does not exist");let n=yield this.inviteFriend(e);if(n.error)return console.error(n.error.message),!1;console.log("Friend invited")}return!0})}inviteFriend(e){return t(this,null,function*(){let s=yield this.addFriendPromise(e);return s.error?console.log(s.error.message):console.log("Friend invited"),s})}subscribeToFriendChanges(){console.log("subscribe to friend changes"),this.supabase.subscribeToFriendChanges()}unsubscribeFriendChanges(){console.log("unsubscribe friend changes"),this.supabase.unsubscribeFriendsChanges()}};r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();export{F as a};
