import{Rb as c,ba as a,i as t,la as d}from"./chunk-BV5FZVRH.js";import{d as n}from"./chunk-PYQTE2ZK.js";var h=(()=>{let r=class r{constructor(){this.supabase=d(c),this.friendRequests=this.supabase.friendRequests}addFriend(e){return console.log("add friend"),t(this.supabase.updateFriend(e))}addFriendPromise(e){return n(this,null,function*(){return console.log("add friend"),yield this.supabase.updateFriend(e)})}getAllFriends(){return t(this.supabase.getAllFriends())}getFriends(){return t(this.supabase.getFriends())}getFriendPromise(){return n(this,null,function*(){let{data:e,error:s}=yield this.supabase.getFriends();return s&&console.error(s),e})}addFriendByEmail(e){return n(this,null,function*(){if(yield this.supabase.userExistByEmail(e)){console.log("User exists");let i=yield this.supabase.addFriendByEmail(e);if(i.error)return console.error(i.error.message),!1;console.log("Friend added")}else{console.log("User does not exist");let i=yield this.inviteFriend(e);if(i.error)return console.error(i.error.message),!1;console.log("Friend invited")}return!0})}inviteFriend(e){return n(this,null,function*(){let s=yield this.addFriendPromise(e);return s.error?console.log(s.error.message):console.log("Friend invited"),s})}subscribeToFriendChanges(){console.log("subscribe to friend changes"),this.supabase.subscribeToFriendChanges()}unsubscribeFriendChanges(){console.log("unsubscribe friend changes"),this.supabase.unsubscribeFriendsChanges()}};r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();export{h as a};
